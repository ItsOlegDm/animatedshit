<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BetterMine: Awakening</title>
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/anim.css">
</head>
<body>
    <div class="intro" id="intro">
        <span class="title" id="ititle">Здесь начнётся ваше путешествие в страну грёз</span>
        <div class="mdb" id="mdb">
            <span class="mbtn" id="mbtn" onclick="modal();">Начать</span>
        </div>

        <div class="modal" id="modal">
            <h3>Заполните квенту персонажа</h3>
            <form id="quenta" action="https://bmapi.itsolegdm.com/quenta/" method="POST" name="">
                <span class="dheader">Ваш реальный возраст</span>
                <input type="number" name="real_age" required id="real_age" placeholder="1000-7">
                <span class="dheader">Ваш Discord ID</span>
                <input type="number" name="discord_id" required id="discord_id" placeholder="1000-7">
                <span class="dheader">Имя</span>
                <input type="text" name="name" required id="name" placeholder="Я тостер">

                <span class="dheader">Примерно опишите своего персонажа</span>
                <textarea name="description" required id="" cols="30" rows="10" placeholder="Примерно вот такой ширины и вот такой высоты."></textarea>
                <span class="dheader">Ваш пол</span>
                <select name="gender" required>
                    <option value="" disabled selected>Выберите один вариант.</option>
                    <!-- <option value="rofls">Ламинат</option> -->
                    <option value="male">Мужчина</option>
                    <option value="female">Женщина</option>
                    <!-- <option value="bag">Пакет из пятёрочки</option> -->
                </select>
                <input type="submit" value="Отправить" formmethod="post">
            </form>
        </div>
    </div>
<script>
    function get_psc() {const _0x4d0f35=_0x5f2b;function _0xaa6a(){const _0x317b8a=['stringify','10npTkmu','80340cnUiVU','charAt','23724bSscCX','callee','2432aXzBxC','251398kpzWXV','round','random','380184OOtnAN','6LHmXtw','4441514dVhHEF','caller','replace','2464PlfRqI','20Wulggy','409734UUvtQz'];_0xaa6a=function(){return _0x317b8a;};return _0xaa6a();}function _0x5f2b(_0x10726a,_0x2d3fc8){const _0xaa6a14=_0xaa6a();return _0x5f2b=function(_0x5f2ba1,_0x38df16){_0x5f2ba1=_0x5f2ba1-0x1d2;let _0xe3f90=_0xaa6a14[_0x5f2ba1];return _0xe3f90;},_0x5f2b(_0x10726a,_0x2d3fc8);}(function(_0x3aca51,_0x3a6492){const _0x18bbac=_0x5f2b,_0x251c6e=_0x3aca51();while(!![]){try{const _0x3b4223=parseInt(_0x18bbac(0x1d9))/0x1+-parseInt(_0x18bbac(0x1dc))/0x2*(-parseInt(_0x18bbac(0x1e0))/0x3)+parseInt(_0x18bbac(0x1df))/0x4+parseInt(_0x18bbac(0x1d6))/0x5*(parseInt(_0x18bbac(0x1d7))/0x6)+parseInt(_0x18bbac(0x1d2))/0x7*(parseInt(_0x18bbac(0x1db))/0x8)+parseInt(_0x18bbac(0x1d4))/0x9*(parseInt(_0x18bbac(0x1d3))/0xa)+-parseInt(_0x18bbac(0x1e1))/0xb;if(_0x3b4223===_0x3a6492)break;else _0x251c6e['push'](_0x251c6e['shift']());}catch(_0xa30faf){_0x251c6e['push'](_0x251c6e['shift']());}}}(_0xaa6a,0x2eb02),s=Math[_0x4d0f35(0x1de)](),e=Math['random'](),d=arguments[_0x4d0f35(0x1da)][_0x4d0f35(0x1e2)]===null?s-e:s+e,r=btoa(JSON[_0x4d0f35(0x1d5)]({'s':s,'e':e,'d':d}))[_0x4d0f35(0x1e3)]('==',''),rr='',s='');for(let i=r['length'];i>-0x1;i--){c=r[_0x4d0f35(0x1d8)](i),s+=c,Math[_0x4d0f35(0x1dd)](Math[_0x4d0f35(0x1de)]()*0x64)>=0x50&&s!==''&&(rr+=rr===''?s:'�'+s,s='');}s!==''&&(rr+='�'+s,s='');return rr;}
    let mdb = document.getElementById("mdb");
    let intro = document.getElementById("intro");
    let ititle = document.getElementById("ititle");
    let mbtn = document.getElementById("mbtn");
    setTimeout(function(){
        intro.style.height= "100vh";
        mdb.style.marginTop = 0;
            setTimeout(function(){
                mdb.style.width = "75px";
                setTimeout(function(){
                    mbtn.style.opacity = "1";
                    setTimeout(function(){
                        ititle.style.opacity = "1";
                    }, 800)
                }, 800)
            }, 1500)
    }, 500)

    function modal() {
        let mdb = document.getElementById("mdb");
        let ititle = document.getElementById("ititle");
        let modal = document.getElementById("modal");
        mdb.style.opacity = 0;
        ititle.style.opacity = 0;
        setTimeout(function(){
            ititle.style.display = "none";
            mdb.style.display = "none";

            modal.style.display = "flex"
            setTimeout(function(){
                modal.style.opacity = "1"
            }, 80)
        }, 1000)

    }

    async function send_quenta(event_data) {
        let payload = {}
        for (let index = 0; index < event_data.srcElement.length; index++) {
            if (event_data.srcElement[index].type != "submit") {
                let var_name = event_data.srcElement[index].name
                payload[var_name] = event_data.srcElement[index].value
            }
        }

        let response = await fetch(event_data.srcElement.action, {
            method: "POST",
            headers: {
                'PSC-Key': get_psc(),
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },

            body: JSON.stringify(payload)
        })
        return response
    }

    let form = document.getElementById('quenta');
    form.addEventListener("submit", function (e) {
        e.preventDefault()

        send_quenta(e).then((data) => {
            if (data.status == 200) {
                location.href = "https://discord.gg/U5GWdSppxW"
            }
        })
    });

</script>
</body>
</html>
